query the db for a date range

store the info in a variable

js some math

